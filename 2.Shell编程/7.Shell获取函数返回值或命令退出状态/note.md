# Shell $?：获取函数返回值或上一个命令的退出状态
$?是一个特殊变量，用来获取上一个命令的退出状态，或者上一个函数的返回值。

所谓退出状态，就是上一个命令执行后的返回结果。退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1，这和C语言的 main() 函数是类似的。

# 1)$?获取上一个命令的退出状态
```shell
#!/bin/bash

if [ "$1" == 100 ]; then
  exit 0 # 参数正确，退出状态为0
else
  exit 1 # 参数错误，退出状态1
fi
```
`exit`表示退出当前的Shell进程，所以我们必须在新进程中运行code1.sh，否则当前Shell会话（终端窗口）会被关闭，我们就无法获得它的退出状态了。
```shell
[root@zntsa 7.Shell获取函数返回值或命令退出状态]# sh ./code1.sh 100
[root@zntsa 7.Shell获取函数返回值或命令退出状态]# echo $?
0
```
```shell
[root@zntsa 7.Shell获取函数返回值或命令退出状态]# sh ./code1.sh 99
[root@zntsa 7.Shell获取函数返回值或命令退出状态]# echo $?
1
```

# 2)$?获取函数的返回值
```shell
#!/bin/bash

# 得到两个数相加的和
function add() {
  return `expr $1 + $2`

}

add 23 50 # 调用函数
echo $? # 获取函数返回值
```
运行结果：
73

Shell不同于Java和C++，Shell函数中的return关键字用来表示函数的退出状态，而不是函数的返回值；Shell不像其他编程语言，没有专门处理返回值的关键字。

以上处理方案在其它编程语言中没有任何问题，但是在 Shell 中是非常错误的，Shell 函数的返回值和其它编程语言大有不同，我们将在《Shell函数返回值》中展开讨论。

