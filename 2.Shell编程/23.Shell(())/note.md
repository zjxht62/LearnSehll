# Shell(()):对整数进行数学运算
双小括号(())是Bash Shell中专门用来进行整数运算的命令，它的效率很高，写法灵活，是常用的运算命令

**注意：(( )) 只能进行整数运算，不能对小数（浮点数）或者字符串进行运算。后续讲到的 bc 命令可以用于小数运算。**

# Shell(())的用法
格式：
```shell
((表达式)
```
就是把数学运算表达式放在`((`和`))`之间

表达式可以只有一个，也可以有多个，多个表达式之间以逗号`,`分隔。对于多个表达式的情况，以最后一个表达式的值作为整个 (( )) 命令的执行结果。

可以使用`$`获取 (( )) 命令的结果，这和使用`$`获得变量值是类似的。

表1：(( )) 的用法


|运算操作符/运算命令		|说明 |
|---|---|
|((a=10+66) ((b=a-15)) ((c=a+b))|这种写法可以在计算完成后给变量赋值。以 ((b=a-15)) 为例，即将 a-15 的运算结果赋值给变量 c。 注意，使用变量时不用加$前缀，(( )) 会自动解析变量名。|
|a=$((10+66) b=$((a-15)) c=$((a+b))|可以在 (( )) 前面加上$符号获取 (( )) 命令的执行结果，也即获取整个表达式的值。以 c=$((a+b)) 为例，即将 a+b 这个表达式的运算结果赋值给变量 c。 |
|((a>7 && b==c))|(( )) 也可以进行逻辑运算，在 if 语句中常会使用逻辑运算。|
|echo $((a+10))	|需要立即输出表达式的运算结果时，可以在 (( )) 前面加$符号。|
|((a=3+5, b=a+10))|对多个表达式同时进行计算。|

**在 (( )) 中使用变量无需加上$前缀，(( )) 会自动解析变量名，这使得代码更加简洁，也符合程序员的书写习惯。**

# Shell(())实例演示
【实例1】利用(())进行简单的数值计算
```shell
[root@zntsa ~]# echo $((1+1))
2
[root@zntsa ~]# echo $((6-3))
3
[root@zntsa ~]# i=5
[root@zntsa ~]# ((i=i*2))
[root@zntsa ~]# echo $i
10
```
【实例2】用 (( )) 进行稍微复杂一些的综合算术运算。
```shell
[c.biancheng.net]$ ((a=1+2**3-4%3))
[c.biancheng.net]$ echo $a
8
[c.biancheng.net]$ b=$((1+2**3-4%3)) #运算后将结果赋值给变量，变量放在了括号的外面。
[c.biancheng.net]$ echo $b
8
[c.biancheng.net]$ echo $((1+2**3-4%3)) #也可以直接将表达式的结果输出，注意不要丢掉 $ 符号。
8
[c.biancheng.net]$ a=$((100*(100+1)/2)) #利用公式计算1+2+3+...+100的和。
[c.biancheng.net]$ echo $a
5050
[c.biancheng.net]$ echo $((100*(100+1)/2)) #也可以直接输出表达式的结果。
5050
```
【实例3】利用 (( )) 进行逻辑运算。
```shell
[c.biancheng.net]$ echo $((3<8))  #3<8 的结果是成立的，因此，输出了 1，1 表示真
1
[c.biancheng.net]$ echo $((8<3))  #8<3 的结果是不成立的，因此，输出了 0，0 表示假。
0
[c.biancheng.net]$ echo $((8==8)) #判断是否相等。
1
[c.biancheng.net]$ if ((8>7&&5==5))
> then
> echo yes
> fi
yes
```
【实例4】利用 (( )) 进行自增（++）和自减（--）运算。
```shell
[c.biancheng.net]$ a=10
[c.biancheng.net]$ echo $((a++))  #如果++在a的后面，那么在输出整个表达式时，会输出a的值,因为a为10，所以表达式的值为10。
10
[c.biancheng.net]$ echo $a #执行上面的表达式后，因为有a++，因此a会自增1，因此输出a的值为11。
11
[c.biancheng.net]$ a=11
[c.biancheng.net]$ echo $((a--)) #如果--在a的后面，那么在输出整个表达式时，会输出a的值，因为a为11，所以表达式的值的为11。
11
[c.biancheng.net]$ echo $a #执行上面的表达式后，因为有a--，因此a会自动减1，因此a为10。
10
[c.biancheng.net]$ a=10
[c.biancheng.net]$ echo $((--a))  #如果--在a的前面，那么在输出整个表达式时，先进行自增或自减计算，因为a为10，且要自减，所以表达式的值为9。
9
[c.biancheng.net]$ echo $a #执行上面的表达式后，a自减1,因此a为9。
9
[c.biancheng.net]$ echo $((++a))  #如果++在a的前面，输出整个表达式时，先进行自增或自减计算，因为a为9，且要自增1，所以输出10。
10
[c.biancheng.net]$ echo $a  #执行上面的表达式后，a自增1,因此a为10。
10
```
本教程假设读者具备基本的编程能力，相信读者对于前自增（前自减）和后自增（后自减）的区别也非常清楚，这里就不再赘述，只进行简单的说明：
+ 执行 echo $((a++)) 和 echo $((a--)) 命令输出整个表达式时，输出的值即为 a 的值，表达式执行完毕后，会再对 a 进行 ++、-- 的运算；
+ 而执行 echo $((++a)) 和 echo $((--a)) 命令输出整个表达式时，会先对 a 进行 ++、-- 的运算，然后再输出表达式的值，即为 a 运算后的值。

【实例5】利用 (( )) 同时对多个表达式进行计算。
```shell
[c.biancheng.net]$ ((a=3+5, b=a+10))  #先计算第一个表达式，再计算第二个表达式
[c.biancheng.net]$ echo $a $b
8 18
[c.biancheng.net]$ c=$((4+8, a+b))  #以最后一个表达式的结果作为整个(())命令的执行结果
[c.biancheng.net]$ echo $c
26
```


